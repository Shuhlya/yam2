import{j as e,$ as x,a7 as b,c as h,aU as N,f as y,ae as g,N as w,aV as O,a3 as D,r as p,aW as k,aX as _,aY as S,d as F,aZ as u,a_ as C,a1 as z,D as L}from"./index-3St8o1xV.js";import{D as A}from"./DateFormInput-bBgTSeu2.js";import{D as j}from"./DemoFilterDropdown-swigqS2q.js";import{B}from"./BreadcrumbAdmin-A9doLk6b.js";const I=["Ascending","Descending"],P=["All","Paid","Cancelled","Refunded"],T=({rows:r,columns:d,title:m})=>e.jsxs("div",{className:"rounded-lg border border-default-200",children:[e.jsx("div",{className:"overflow-hidden p-6 ",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4 sm:justify-between lg:flex-nowrap",children:[e.jsx("h2",{className:"text-xl font-semibold text-default-800",children:m}),e.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[e.jsx(j,{filterType:"Sort",filterOptions:I}),e.jsx(j,{filterType:"Status",filterOptions:P})]})]})}),e.jsx("div",{className:"relative overflow-x-auto",children:e.jsx("div",{className:"inline-block min-w-full align-middle",children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"w-full divide-y divide-default-200",children:[e.jsx("thead",{className:"bg-default-100",children:e.jsx("tr",{className:"text-start",children:d.map(t=>e.jsx("th",{className:"whitespace-nowrap px-6 py-3 text-start text-sm font-medium text-default-800",children:t.name},t.key))})}),e.jsx("tbody",{className:"divide-y divide-default-200",children:r.map((t,l)=>{const s=t.dish;return e.jsx("tr",{children:d.map(n=>{const a=t[n.key];if(n.key=="dish_id")return e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-default-800",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"shrink",children:e.jsx("div",{className:"h-18 w-18",children:e.jsx("img",{src:(s==null?void 0:s.images[0])??"",className:"h-full max-w-full",width:72,height:72,alt:(s==null?void 0:s.name)??""})})}),e.jsxs("div",{className:"grow",children:[e.jsx("p",{className:"mb-1 text-sm text-default-500",children:s==null?void 0:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex gap-1.5",children:[Array.from(new Array(Math.floor((s==null?void 0:s.review.stars)??0))).map((c,i)=>e.jsx(x,{size:18,className:"fill-yellow-400 text-yellow-400"},i)),!Number.isInteger(s==null?void 0:s.review.stars)&&e.jsx(b,{size:18,className:"text-yellow-400"}),((s==null?void 0:s.review.stars)??0)<5&&Array.from(new Array(5-Math.ceil((s==null?void 0:s.review.stars)??0))).map((c,i)=>e.jsx(x,{size:18,className:"text-default-400"},i))]}),e.jsxs("h6",{className:"mt-1 text-xs text-default-500",children:["(",s==null?void 0:s.review.count,")"]})]})]})]})},a+l);if(n.key=="status"){const c=a=="paid"?"bg-green-500/10 text-green-500":a=="refunded"?"bg-pink-500/10 text-pink-500":"bg-yellow-500/10 text-yellow-500";return e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:h("rounded-md px-3 py-1 text-xs font-medium",c),children:N(a)})},a+l)}else return n.key=="id"?e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-default-500 hover:text-primary-500",children:e.jsx(y,{to:`/admin/orders/${t.id.slice(1)}`,children:t.id.toUpperCase()})},a+l):e.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-default-500",children:[n.key=="amount"&&g,a]},a+l)})},l)})})]})})})})]}),E=()=>{const{control:r}=w({defaultValues:{date:new Date}});return e.jsx(A,{name:"date",type:"date",className:"block w-full rounded-md border-default-200 bg-transparent px-9 py-2 text-sm font-medium text-default-700 focus:border focus:border-primary",control:r,options:{dateFormat:"d/m/y"}})},o=({title:r,stats:d,variant:m,icon:t})=>{const l=t;return e.jsx("div",{className:"overflow-hidden rounded-lg border border-default-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:h("inline-flex h-16 w-16 items-center justify-center rounded-full",m),children:e.jsx(l,{size:32})}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1 text-base font-medium text-default-500",children:r}),e.jsx("h4",{className:"mb-2 text-2xl font-semibold text-default-950",children:d})]})]})})},v=O.map(r=>({...r,dish:D.find(d=>d.id==r.dish_id)})),R=[{key:"date",name:"Date"},{key:"id",name:"Order ID"},{key:"dish_id",name:"Dish"},{key:"amount",name:"Total"},{key:"status",name:"Status"}],H=()=>{const[r,d]=p.useState();return p.useEffect(()=>{(async()=>{const t=await Promise.all(Object.keys(u).map(async(l,s)=>{const n=await Promise.all(u[l].map(async(a,c)=>{var f;a.order=await C(a.order_id);const i=await z(((f=a.order)==null?void 0:f.dish_id)??0);return e.jsxs("div",{className:"flex items-center gap-4 rounded-lg bg-primary/10 p-2",children:[e.jsx("div",{className:"flex h-16 w-16 items-center justify-center",children:e.jsx("img",{src:(i==null?void 0:i.images[0])??"",height:64,width:64,alt:"food"})}),e.jsxs("div",{className:"w-full",children:[e.jsxs("h6",{className:"mb-1 flex items-center justify-between text-base font-medium text-default-900",children:[i==null?void 0:i.name,e.jsx("p",{className:"me-1 text-xs font-medium text-default-400",children:a.time})]}),e.jsx("p",{className:"font-medium text-default-600",children:a.order_id.toUpperCase()})]})]},a.order_id+c)}));return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"mb-4 flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h2",{className:"mb-0.5 text-xl font-semibold text-default-800",children:N(l)}),e.jsx(y,{to:"/admin/orders/9f36ca",children:e.jsx(L,{size:18})})]}),e.jsx("div",{className:"flex flex-col gap-4",children:n})]},l+s)}));d(t)})()},[]),e.jsx("div",{className:"w-full lg:ps-64",children:e.jsxs("div",{className:"page-content space-y-6 p-6",children:[e.jsx(B,{title:"Orders List",subtitle:"Orders"}),e.jsxs("div",{className:"grid gap-6 xl:grid-cols-12",children:[e.jsx("div",{className:"xl:col-span-9",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2 2xl:grid-cols-3",children:[e.jsx(o,{title:"Food Delivered",stats:"23,568",icon:k,variant:"bg-primary/20 text-primary"}),e.jsx(o,{title:"Your Balance",stats:`${g}8,904.80`,icon:_,variant:"bg-yellow-500/20 text-yellow-500"}),e.jsx(o,{title:"Satisfaction Rating",stats:"98%",icon:x,variant:"bg-green-500/20 text-green-500"})]}),e.jsx("div",{className:"grid grid-cols-1",children:e.jsx(T,{title:"Order History",columns:R,rows:v})})]})}),e.jsx("div",{className:"xl:col-span-3",children:e.jsx("div",{className:"rounded-lg border border-default-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold text-default-800",children:"Ongoing Orders"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute start-2.5 top-1/2 -translate-y-1/2",children:e.jsx(S,{size:16,className:"text-default-700"})}),e.jsx("span",{className:"absolute end-2.5 top-1/2 -translate-y-1/2",children:e.jsx(F,{size:16,className:"text-default-700"})}),e.jsx(E,{})]})]}),r]})})})]})]})})},W=Object.freeze(Object.defineProperty({__proto__:null,default:H,orderRows:v},Symbol.toStringTag,{value:"Module"}));export{T as O,v as o,W as p};
